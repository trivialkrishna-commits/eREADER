<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My eReader</title>
<style>
  body {
    font-family: serif;
    margin: 10px;
    line-height: 1.6;
    font-size: 18px;
    background-color: #fff;
    color: #000;
    max-width: 480px;
  }
  button {
    padding: 6px 12px;
    margin: 4px;
    font-size: 16px;
  }
  .dark {
    background-color: #000;
    color: #ddd;
  }
  #menu, #reader {
    display: none;
  }
  #menu.active, #reader.active {
    display: block;
  }
  h2, p {
    text-align: center;
  }
</style>
</head>
<body>

<h2 id="title">My eReader</h2>

<div id="menu" class="active">
  <p>Select a book:</p>
  <ul id="bookList"></ul>
</div>

<div id="reader">
  <div id="book"></div>
  <div id="controls">
    <button onclick="prevPage()">‚¨ÖÔ∏è Prev</button>
    <button onclick="toggleTheme()">üåô Mode</button>
    <button onclick="nextPage()">Next ‚û°Ô∏è</button>
    <button onclick="backToMenu()">üìö Menu</button>
  </div>
</div>

<script>
  // SIMPLE, COMPATIBLE EREADER SCRIPT
  var bookList = document.getElementById('bookList');
  var bookDiv = document.getElementById('book');
  var menu = document.getElementById('menu');
  var reader = document.getElementById('reader');

  var currentText = "";
  var pageIndex = 0;
  var currentBook = "";
  var pageLength = 1200; // characters per page

  // Define your books manually here
  var bookArray = [
    "Alice_in_Wonderland.txt",
    "The_Great_Gatsby.txt"
  ];

  // Create menu
  for (var i = 0; i < bookArray.length; i++) {
    var filename = bookArray[i];
    var name = filename.replace(".txt", "");
    var li = document.createElement("li");
    var btn = document.createElement("button");
    btn.textContent = name;
    btn.onclick = (function(file) {
      return function() { loadBook("books/" + file); };
    })(filename);
    li.appendChild(btn);
    bookList.appendChild(li);
  }

  // Load book file as plain text
  function loadBook(path) {
    currentBook = path;
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4) {
        if (xhr.status === 200 || xhr.status === 0) {
          currentText = xhr.responseText;
          var saved = localStorage.getItem('page_' + currentBook);
          pageIndex = saved ? parseInt(saved) : 0;
          showReader();
        } else {
          bookDiv.textContent = "Error loading book.";
        }
      }
    };
    xhr.open("GET", path, true);
    xhr.send();
  }

  function showReader() {
    menu.className = "";
    reader.className = "active";
    render();
  }

  function render() {
    var start = pageIndex * pageLength;
    var end = start + pageLength;
    bookDiv.textContent = currentText.slice(start, end);
    if (currentBook) {
      localStorage.setItem('page_' + currentBook, pageIndex);
    }
  }

  function nextPage() {
    if ((pageIndex + 1) * pageLength < currentText.length) {
      pageIndex++;
      render();
    }
  }

  function prevPage() {
    if (pageIndex > 0) {
      pageIndex--;
      render();
    }
  }

  function toggleTheme() {
    if (document.body.className === "dark") {
      document.body.className = "";
    } else {
      document.body.className = "dark";
    }
  }

  function backToMenu() {
    reader.className = "";
    menu.className = "active";
  }
</script>

</body>
</html>
